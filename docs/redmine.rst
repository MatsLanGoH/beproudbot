Redmine
=============

RedmineのプラグインはRedmineというプロジェクト管理システムとSlackを繋ぎます。

チケット情報は定義した部屋だけで回答します。

機能概要
=========

- Slackで t<\d+>と発言したら、チケット情報をRedmineから取得して、回答する
- チケット情報を漏らないため、プロジェクトに定義されているチャネルしか回答しない
- それぞれのユーザのAPIキーでAPIをアクセスする
- 文のなかでも t123456 を書いたら、ボットは回答する (考えず使えるということ）

入力/出力
---------------

成功
^^^^^^^^

::

  << 僕は t56938について質問があります
  
  >> レコメンドの残件
  
  htps://project.beproud.jp/redmine/issues/56938


Slackのユーザは登録されていない
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

::

  << 僕は t56938について質問があります
  
  >> だれだれはRedmineUserテーブルに登録されていません。

SlackのユーザidとRedmineユーザのAPIキーを redmine_users テーブルに登録してください。

チケット Permission
^^^^^^^^^^^^^^^^^^^^^^^^^

::

  << 僕は t56938について質問があります
  
  >> だれだれははチケットをアクセスできません。

ボットはAPIに当たった時 200以外のステータスコードを取得しました。発言したユーザにプロジェクトのアクセスを開けたら、直すはずです。

チャネル Permission
^^^^^^^^^^^^^^^^^^^^^^^
::

  << 僕は t56938について質問があります
  
  >> 56938は＃randomで表示できません。

チャネルidは redmine_projectchannel のテーブルに登録されていません。

環境設定
-------------

REDMINE_URL: チケットのURLの元 例: https://project.beproud.jp/redmine/issues/


DBのテーブル
===============

SlackのユーザとRedmineのAPI Keyのmap：redmine_users
-------------------------------------------------------
================== ============ ======== ================= ===================================
 カラム名             型           必須      デフォルト値        説明
------------------ ------------ -------- ----------------- -----------------------------------
 user_id             文字列(9)      ○        −                Slackのユーザi 例: U023BECGF
 api_key             文字列(40)     ○        −                RedmineのAPIのKey 例: d1d567978001e4f884524a8941a9bbe6a8be87ac
================== ============ ======== ================= ===================================


Projectはどのチャネルで返してもよいのmap.：redmine_projectchannel
----------------------------------------------------------------------
================== ============== ======== ================= ===================================
 カラム名             型             必須      デフォルト値        説明
------------------ -------------- -------- ----------------- -----------------------------------
 project_id          整数            ○        −                Redmineのプロジェクトのid
 channels            文字列(249)     ○        −                CSVの形式の部屋リスト 25チャネルまで登録できる 例: "C0AGP8QQH,C0AGP8QQZ"
================== ============== ======== ================= ===================================

